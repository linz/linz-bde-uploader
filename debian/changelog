linz-bde-uploader (1.5.3-1) trusty; urgency=medium

  [ billgeo ]
  * made changes for LOL 3.11 release
  * one more change for LOL 3.11 release
  * fixed bug for LOL release 3.11 where function in bde_functions.sql referenced a column that wouldnt be created until patches.sql was run - variable type is now hardcoded to workaround this
  * fixed syntax error for LOL release 3.11

  [ Bill Nelson ]

 -- Bill Nelson <bmnelson@linz.govt.nz>  Thu, 21 May 2015 10:54:51 +1200

linz-bde-uploader (1.5.2) lucid; urgency=medium

  [ Jeremy Palmer ]
  * Fix for electoral layer creation when duplicate SUFIs are found

  [ Joseph Ramsay ]

  [ Jeremy Palmer ]
  * Fix for electoral layer creation when duplicate SUFIs are found

  [ Joseph Ramsay ]

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Mon, 13 Apr 2015 15:28:01 +1200

linz-bde-uploader (1.5.1-1) lucid; urgency=medium

  * Revert deb control to standard config

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Thu, 09 Apr 2015 15:27:57 +1200

linz-bde-uploader (1.5.0-1) lucid; urgency=medium

  [ Jeremy Palmer ]
  * Added more information about process holding table locks
  * Added offshore Island support to simplified parcels layers.

  [ Joseph Ramsay ]
  * Patch supporting Landonline UTF8 data as well as providing ASCII translations for simplifid address and road tables
  * Removed ARN/ALN groupby lines from maintainsimplifiedelectoral (no longer needed with utf8)
  * patches.sql: road_centre+line+road_centre_line_subsection+street_address2 locality_utf8 expanded to varchar100
  * Removed ARN/ALN group by statements in layer functions
  * Added utf8 self replacements for [u2013,u2014,u2018,u2019,u201C,u201D,u2022]
  * fix for merge conflict dd48c67

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Thu, 09 Apr 2015 12:48:33 +1200

linz-bde-uploader (1.4.4-1) lucid; urgency=low

  * Added check for unique sufi records

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Mon, 10 Nov 2014 06:17:04 +1300

linz-bde-uploader (1.4.3-1) lucid; urgency=low

  * Added crs_image_history to config
  * Added support for PostgreSQL/PostGIS extensions. At the same time
    cleaned up debian post install functions to correct report errors.
  * Fix early drop of temp table

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Tue, 21 Oct 2014 05:51:27 +1300

linz-bde-uploader (1.4.2-1) lucid; urgency=low

  * Increase field width for street address and road layers, fix bad
    UTF8 config entry

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 17 Oct 2014 16:53:31 +1300

linz-bde-uploader (1.4.1-1) precise; urgency=low

  [ iharrison ]
  * Update lds_layer_functions.sql to fix typo in meshblock layer check

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Mon, 13 Oct 2014 07:19:00 +1300

linz-bde-uploader (1.4.0-1) lucid; urgency=low

  [ Jeremy Palmer ]
  * Added code from Joe for the creation of full landonline table that
    require a filter
  * Refactored title exclusion and protection code
  * Clean-up usage of temp tables, remove some dead code
  * Remove the unneeded parcel point table and standardised some SQL
  * Few more clean-ups
  * Untabify file
  * Untabify file schema file
  * Add conf to run FBDE table, bump version
  * Fix issues from recent refactoring
  * Few fixes for affected table checks

  [ iharrison ]
  * Removed references to BDE schema

  [ Jeremy Palmer ]
  * Fixed some schema path issues
  * Make parcel polygons OGC valid

  [ Joseph Ramsay ]
  * Rename conflicting street_address table to street_address_ext

  [ iharrison ]
  * Added 3 new queries.
  * Added 3 new schema definitions.
  * Changed feature_name_poly geometry type to polygon

  [ Joseph Ramsay ]
  * Prep for tstlhapp build, modified patches.sql for run-in, postint
  * remove duplicate index fk_tmt_ttm
  * add search path incl bde_control schema and fk_tmt_ttm index
  * Bugfix. Change table update check function to reference correct
    source
  * ORDER BY added to PK's on all tables to increase revisioning speed

  [ iharrison ]
  * tmp_titles to tmp_title_estates join

  [ Joseph Ramsay ]
  * Added Timestamp logging to UpdateSimplified func, timing logs to
    FBDE
  * Added sufi (INT) to street_address
  * Added pending-only table/pop functions

  [ iharrison ]
  * Added fields to title table
  * Added column to title table

  [ Joseph Ramsay ]
  * Col adds, New col type ver func, Patches.sql update, Pub/Prv reverts
  * Split crs_title/crs_land_district patch + bugfix bde_ext_functions
    deps
  * table_version prefix added to is_tab_ver func in chg_col_typ func

  [ Jeremy Palmer ]
  * Add crs_image_history table. Fix application of TTM index in patch
  * Fixed issues with index patch
  * Add maori_land flag to titles full landonline table
  * version new crs_image_history table
  * Fixed order by statement for full landonline tables
  * Added survey plan image revision table, fixed primary key naming and
    rogue tablespace statement
  * Added survey plan image revision checks for affected tables
  * Fixed issue with ttl_title_no_head_srs not being included in group
    by statement
  * Updated electoral SQL code to use TA grid index and use UTF8 names
  * fixed patch SQL
  * Updated create grid function to correctly support schema qualified
    statements
  * Added checks for affected table back to electoral simple layer
    generation
  * Can't check for public table privileges, so have removed test

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Thu, 09 Oct 2014 08:45:28 +1300

linz-bde-uploader (1.3.5-1) precise; urgency=low

  [ Jeremy Palmer ]
  * ensure patch checks that table is versioned
  * ensure logging package is imported into BdeUploaderDataDef class
  * fix declaration
  * Ensure that training tiles are removed from the simple title memorial tables
  * Fix typo in commit from 765a797d92

  [ Joseph Ramsay ]
  * Patch to update name_and_date column from varchar(100) to varchar(200) on tables bde.crs_statute and table_version.bde_crs_statute_revision

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Fri, 16 May 2014 10:40:26 +1200

linz-bde-uploader (1.3.4-1) lucid; urgency=low

  * Ensure SQL RAISE messages have the correct number of parameters

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 18 Sep 2013 14:37:58 +1200

linz-bde-uploader (1.3.3-1) lucid; urgency=low

  * Fix syntax error for title memorial creation sql
  * Fix memorial diff
  * Improve memorial text sorting. Clean up SQL
  * Fix bug with memorial extended text SQL
  * Ensure literal regex is escaped. wasn't noticed on PG 9.1, but was a
    problem on 9.0
  * Improve performance for title memorial differencing
  * ensure memorial text is sorted correctly when sequence no is larger
    than 9

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Mon, 16 Sep 2013 12:30:52 +1200

linz-bde-uploader (1.3.2-1) lucid; urgency=low

  * Add title memorials dataset
  * Improve title memorial aggregation ordering
  * Really make sure memorial aggregation order is correct

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 06 Sep 2013 17:37:02 +1200

linz-bde-uploader (1.3.1-1) lucid; urgency=low

  * Update observation layers to contain the start and end mark name
  * Improve observation query performance. Make note about data quality
    issue

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 23 Aug 2013 13:12:04 +1200

linz-bde-uploader (1.3.0-1) lucid; urgency=low

  * Ensure that control characters within BDE file that are not
    printable in XML are not carried through to PostgreSQL
  * Updated BDE processor to support bad control character and to fix
    current problems in the database

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 21 Jun 2013 13:41:11 +1200

linz-bde-uploader (1.2.9-1) lucid; urgency=low

  * Ensure upload process stops when bde_copy error is reported

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Thu, 16 May 2013 14:37:10 +1200

linz-bde-uploader (1.2.8-1) lucid; urgency=low

  * Fixed bug relating to 286468ae09 where schema prefix was not being
    explicitly used in patch

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 15 May 2013 11:38:26 +1200

linz-bde-uploader (1.2.7-1) lucid; urgency=low

  * Rebuild BDE table primary keys using versioned table column key
  * remove debugging message

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 10 May 2013 14:44:40 +1200

linz-bde-uploader (1.2.6-1) lucid; urgency=low

  * Remove dropping of connections by default
  * Add new street address layer schema for NZPost

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 03 May 2013 15:54:23 +1200

linz-bde-uploader (1.2.5-1) lucid; urgency=low

  * Fixed table version diff bug [issue #19]
  * Included first unit tests for table version functions using pgTAP

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 09 Jan 2013 14:22:20 +1300

linz-bde-uploader (1.2.4-1) precise; urgency=low

  * Apply patch to upgrade table version functions. Relates to 85ee4a219a [issue #10]
  * Improved patch from 85ee4a2 to ensure existing functions with modified signatures are cleaned up
  * Add status column to title estate and owner tables. Keep status quo with registered data - but likely to expand in future to include historic data

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 19 Dec 2012 21:18:17 +1300

linz-bde-uploader (1.2.3-1) precise; urgency=low

  * Fix bug in observation patch [issue #9]

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 14 Dec 2012 13:44:41 +1300

linz-bde-uploader (1.2.2-1) precise; urgency=low

  * Set new All Linear Parcels calc area to NULL
  * Fix table constraint for all linear parcels

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Thu, 13 Dec 2012 10:25:58 +1300

linz-bde-uploader (1.2.1-1) precise; urgency=low

  * Fix obs patch
  * Fix another syntax error for new aspatial patches
  * Fix Title layer SQL error

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 12 Dec 2012 11:37:53 +1300

linz-bde-uploader (1.2.0-1) precise; urgency=low

  * Support for aspatial tables
  * Ensure version tables have correct permission applied.
  * Fix observation shape vertex order to be the same as observation direction
  * Include all parcel parcels layer. This contains parcels that are not pending. 
    i.e Current, Approved, Historic and Survey Historic

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Mon, 10 Dec 2012 13:09:40 +1300

linz-bde-uploader (1.1.6-1) precise; urgency=low

  * Apply ver_get function permission changes

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Thu, 01 Nov 2012 10:43:51 +1300

linz-bde-uploader (1.1.5-1) precise; urgency=low

  * Upgrade to fix user permission problems identified with issue #8

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Wed, 31 Oct 2012 16:48:09 +1300

linz-bde-uploader (1.1.4-1) lucid; urgency=low

  [ Craig de Stigter ]
  * fix extra 'inserts' in diff output, from rows that were created and
    then deleted during the diff window.

  [ Joseph Ramsay ]

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Tue, 30 Oct 2012 15:58:46 +1300

linz-bde-uploader (1.1.3-1) precise; urgency=low

  * Fix for Geodetic message 2

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Tue, 25 Sep 2012 09:24:36 +1200

linz-bde-uploader (1.1.2-1) precise; urgency=low

  * geodetic message fix
  * Revert "geodetic message fix"
  * geodetic message fix

 -- Joseph Ramsay <jramsay@linz.govt.nz>  Tue, 18 Sep 2012 15:03:04 +1200

linz-bde-uploader (1.1.1-1) UNRELEASED; urgency=low

  * Fixed bug with creation of LDS schema.

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Tue, 20 Mar 2012 11:01:02 +1200

linz-bde-uploader (1.1.0-1) UNRELEASED; urgency=low

  * Added 3 new layers. WACA and SPI adjustments and Mesh Blocks
  * Fixes to generation of Road centreline datasets
  * Defined all fields width to better support FGBD exports on LDS
  * Added rna_id to street_address layer
  * Improved the performance of the survey observation differencing
  * Improved logging to allow for 99 rotated files
  * Added accuracy values observation related layers
  * Rounded calc_area to whole number

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 13 Mar 2012 17:37:40 +1200

linz-bde-uploader (1.0.2-1) UNRELEASED; urgency=low

  * Added new logging system based on log4perl. This removes all logging to db.

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Thu, 14 Jul 2011 12:06:50 +1200

linz-bde-uploader (1.0.1-1) UNRELEASED; urgency=low

  * Added runtime to email output
  * Fixed run_bde_upload logging
  * Fixed issue with logging before database connection is made
  * Refactor handling of incremental data application. 

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Wed, 22 Jun 2011 15:28:00 +1200

linz-bde-uploader (1.0.0-1) UNRELEASED; urgency=low

  * Initial release.

 -- Jeremy Palmer <jpalmer@linz.govt.nz>  Fri, 6 May 2011 11:58:00 +1200
